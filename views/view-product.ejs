<%- include('partials/start') %>
<%- include('partials/navbar') %>

<style>
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
</style>

<div class="bg-light py-3">
    <div class="container">
        <div class="row">
            <div class="col-md-12 mb-0">
                <a href="/home">Home</a>
                <span class="mx-2 mb-0">/</span>
                <a href="/shop">Shop</a>
                <span class="mx-2 mb-0">/</span>
                <strong class="text-black">View Product</strong>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-6">
            <img src="/uploads/<%= product.image_path %>" alt="Image" class="img-fluid">
        </div>
        <div class="col-md-6">
            <h2 class="text-black"><%= product.name %></h2>
            <div class="my-3">
                <%- include('partials/ratings/one-star') %>
            </div>
            <p><%= product.description %></p>

            <div class="mb-5">
                <div class="input-group mb-3" style="max-width: 120px;">
                    <div class="input-group-prepend">
                        <button class="btn btn-outline-primary" type="button">&minus;</button>
                    </div>
                    <input type="number" class="form-control text-center" value="1" min="1">
                    <div class="input-group-append">
                        <button class="btn btn-outline-primary" type="button">&plus;</button>
                    </div>
                </div>
            </div>
            <button type="button" class="fw-bold btn btn-primary w-100 add-to-cart-btn"
                    data-product-id="<%= product.product_id %>"
                    <%= product.quantity === 0 ? 'disabled' : '' %>>
                <i class="bi bi-cart"></i>
            </button>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-md-12">
            <h3 class="mb-5">Reviews</h3>

            <div class="review mb-4">
                <h4>John Doe</h4>
                <div class="my-2">
                    <%- include('partials/ratings/four-stars') %> 
                </div>
                <p>Great product!</p>
            </div>

            <div class="review mb-4">
                <h4>Jane Smith</h4>
                <div class="my-2">
                    <%- include('partials/ratings/three-stars') %>
                </div>
                <p>Not bad!</p>
            </div>

            <div class="review-form">
                <h4>Leave a Review</h4>
                <form action="/submit-review" method="POST">
                    <div class="form-group">
                        <label for="rating" class="text-black">Your Rating</label>
                        <select id="rating" name="rating" class="form-control">
                            <option value="5">★★★★★ - Excellent</option>
                            <option value="4">★★★★☆ - Very Good</option>
                            <option value="3">★★★☆☆ - Average</option>
                            <option value="2">★★☆☆☆ - Poor</option>
                            <option value="1">★☆☆☆☆ - Terrible</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="review" class="text-black">Your Review</label>
                        <textarea id="review" name="review" class="form-control" rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary">Submit Review</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<%- include('partials/end') %>
